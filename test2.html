<!DOCTYPE html>
<html>
  <head>
    <title>Test 2</title>
  </head>
  <body>
    <main>
      <h3>Test 2</h3>
      <form onsubmit="send(event)">
        <label for="name">Move:</label>
        <input type="text" id="message" name="message" required />
      </form>
    </main>
    <script>
      const path = window.location.pathname;
      const id = path.split("/")[2];

      const socket = new WebSocket(`ws://${window.location.host}/ws/${id}/`);

      socket.onmessage = (event) => {
        const msg = JSON.parse(event.data);
        const id = msg.id;
        const content = msg.content;
        const whitesTurn = msg.whitesTurn;
        const checkmate = msg.checkmate;
        console.log(id, content, whitesTurn, checkmate);
      };

      function send(event) {
        event.preventDefault();
        var msg = document.getElementById("message").value;
        socket.send(msg);
      }
    </script>
  </body>
</html>
